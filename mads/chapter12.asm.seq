;********************************************;VISIBLE MONITOR EXTENSIONS;;APPENDIX C12: ASSEMBLER LISTING OF;VISIBLE MONITOR EXTENSIONS;SEE CHAPTER 12 OF TOP-DOWN ASSEMBLY LANGUAGE;PROGRAMMING FOR YOUR COMMODORE 64 AND VIC-20;BY KEN SKIER;COPYRIGHT (C) 1984 BY KENNETH SKIER;LEXINGTON, MASSACHUSETTS;;********************************************;********************************************;;EXTENSIONS TO THE VISIBLE MONITOR;; P TOGGLE PRINTER ON AND OFF; U TOGGLE USER DEVICE ON AND OFF; H EXIT DUMP (TYPE DEPENDS OF STATE OF PRINTER); M MOVE MEMORY; ? DISASSMBLER (TYPE DEPENDS OF STATE OF PRINTER); T SIMPLE TEXT EDITOR;;********************************************EXTEND CMP #'P'    ;Is it the P key?       BNE IFU     ;If not, perform the next test.       LDA PRINTR  ;If so, toggle the printer       EOR #$FF    ;flag       STA PRINTR  ;       RTS         ;and return to caller.;IFU    CMP #'U'    ;Is it the 'U' key?       BNE IFH     ;If not, perform the next test.       LDA USER    ;If so, toggle the user-       EOR #$FF    ;PROVIDED output FLAG...       RTS         ;AND RETURN;IFH    CMP #'H'    ;Is it the 'H' key?       BNE IFM     ;If not, perform the next test.       LDA PRINTR  ;Is the printer selected?       BNE NEXTPD  ;If so, print a hexdump.       JSR TVDUMP  ;If not, dump to screen...       RTS         ;and return.;NEXTPD JSR PRDUMP  ;Print a hexdump...       RTS         ;...and return.;IFM    CMP #'M'    ;Is it the 'M' key?       BNE IFDIS   ;If not, perform the next test.       JSR MOVER   ;If so, LET USER SPECIFY AND       RTS         ;MOVE A BLOCK OF MEMORY;IFDIS  CMP #'?'    ;Is it the '?' key?       BNE IFT     ;If not, perform the next test.       LDA PRINTR  ;Is the printer selected?       BNE NEXTDS  ;If so, print a disassembly.       JSR TVDIS   ;If not, DISASSEMBLE TO THE       RTS         ;SCREEN AND RETURN;NEXTDS JSR PRDIS   ;Print a disassembly...       RTS         ;and return.;IFT    CMP #'T'     ;Is it the 'T' key?       BNE EXEXT    ;If not, return.       JSR EDITOR   ;If so, call the SIMPLE       RTS          ;TEXT EDITOR and return.;EXEXT  RTS          ;EXTbiND THE VISIBLE MONITOR                    ;EVEN FURTHER BY REPLACING                    ;THIS RTS' WITH A JMF' TO                    ;MORE TEST-AND-BRANCH CODE.;********************************************;;;;********************************************.END